{{! frame/frame.mustache : 상단바 + 하단 네비 (Nanum Gothic, 풀블리드, CSS만으로 활성 탭 상시 표시) }}
<link rel="stylesheet" href="css/condition.css" />
<link rel="stylesheet" href="css/overview.css" />

<style>

    :root{
      --topbar-bg:#09131A;        /* 상단바 배경 */
      --topbar-text:#FAFAFA;      /* 상단바 텍스트 */

      --footer-bg:rgba(9,19,26,.9);/* 하단바 배경(반투명) */
      --footer-line:#0E1C26;      /* 하단바 상단 경계선(바 자체의 라인) */

      --tile-bg:#09131A;          /* 하단 버튼 타일 배경 */
      --tile-border:#1D282F;      /* 타일/구분용 스트로크 컬러(요구 색상) */

      --green:#00AA6F;            /* 86×50 녹색 박스 */
      --label:#FAFAFA;            /* 라벨 텍스트(흰색) */
    }

    html,body{ width:100%; }                                           /* 전폭 보장 */
    body{

      box-sizing: border-box;
      margin:0;                                                        /* 기본 마진 제거 */
      padding-top:50px;                                                /* 상단 고정바 높이만큼 여백 */
      padding-bottom:60px;                                             /* 하단 고정바 높이만큼 여백 */
      font-family:"Nanum Gothic","나눔고딕",Apple SD Gothic Neo,Malgun Gothic,system-ui,sans-serif; /* 나눔고딕 적용 */
    }

    /* ========= 상단바 ========= */
    .main-header{
      position:fixed; top:0; left:0; right:0; height:50px;             /* 상단 고정 */
      background:var(--topbar-bg);                                     /* 배경색 */
      display:flex; align-items:center; gap:12px;                       /* 정렬/간격 */
      padding:0 20px;                                                   /* 좌우 패딩 */
      color:var(--topbar-text);                                        /* 텍스트 색상 */
      z-index:2000;                                                     /* 위로 */
      border-bottom:1px solid var(--tile-border);                       /* ✅ 상단바 아래쪽 스트로크(타일과 동일 1px #1D282F) */
    }
    .main-header .logo{
      width:clamp(18px,1.2vw,28px); height:clamp(18px,1.2vw,28px);     /* 반응형 로고 크기 */
      object-fit:contain; display:block;                                /* 로고 렌더링 */
    }
    .main-header .title{
      margin:0; font-weight:700; letter-spacing:.2px;                   /* 타이포 설정 */
      font-size:clamp(14px,1.2vw,18px); color:var(--topbar-text);       /* 반응형 크기 */
    }

    /* ========= 하단 네비(바 자체 라인 + 타일 테두리) ========= */
    .main-footer{
      position:fixed; left:0; right:0; bottom:0; height:60px;          /* 하단 고정(Y:1020 at 1080p) */
      background:var(--footer-bg);                                     /* 반투명 배경 */
      border-top:1px solid var(--footer-line);                         /* 바 상단 경계선(#0E1C26) */
      backdrop-filter:blur(6px);                                       /* 살짝 블러 */
      z-index:2000;                                                     /* 위로 */
    }

    .bottom-nav{
      height:100%;                                                     /* 푸터 높이 채움 */
      display:grid; grid-template-columns:repeat(5,minmax(0,1fr));     /* 5칸 균등 분할 */
      width:100%; margin:0 !important; max-width:none !important;      /* 풀블리드 강제(좌우 여백 방지) */
      padding:0 !important;                                            /* 내부 패딩 제거 */
    }

    .nav-button{
      position:relative; height:60px;                                   /* 타일 높이 고정 */
      display:flex; align-items:center; justify-content:center;         /* 중앙 정렬 */
      text-decoration:none; user-select:none;                           /* 링크 기본 제거 */
      background:var(--tile-bg);                                        /* 타일 배경(#09131A) */
      color:var(--label);                                               /* 라벨 흰색 */
      border-top:1px solid var(--tile-border);                          /* 타일 위 스트로크(#1D282F) */
      border-bottom:1px solid var(--tile-border);                       /* 타일 아래 스트로크 */
      border-left:1px solid var(--tile-border);                         /* 타일 좌 스트로크 */
    }
    .nav-button:last-child{ border-right:1px solid var(--tile-border); }/* 마지막만 우 스트로크 */

    .icon-wrapper{
      position:relative; width:86px; height:50px; border-radius:10px;   /* 86×50 스펙 */
      display:flex; flex-direction:column; gap:5px;                      /* 아이콘-라벨 간격 좁게 */
      align-items:center; justify-content:center; overflow:hidden;       /* 녹색 박스 클립 */
    }
    .icon-wrapper::before{
      content:""; position:absolute; inset:0; border-radius:10px;       /* wrapper 전체 덮음 */
      background:var(--green); opacity:0; transition:opacity .12s ease; /* 기본 숨김 → 부드럽게 표시 */
      z-index:0;                                                         /* 내용 뒤쪽 */
    }

    /* 호버 시 녹색 박스 + 아이콘 흰색화 */
    .nav-button:hover .icon-wrapper::before{ opacity:1; }                /* 호버: 녹색 박스 표시 */
    .nav-button:hover .icon-img{ filter:brightness(0) invert(1); }       /* 호버: 아이콘 흰색처럼 */

    .icon-img{
      width:clamp(18px,1.6vw,28px); height:clamp(18px,1.6vw,28px);      /* 아이콘 크기 */
      object-fit:contain; z-index:1;                                     /* 녹색 박스 위 */
    }

    .nav-label{
      z-index:1; line-height:1; color:var(--label);                      /* 라벨(흰색) */
      font-size:clamp(10px,.9vw,13px); font-weight:700;                  /* 가독성 ↑ */
    }

    /* ── CSS만으로 “현재 페이지 탭 상시 활성화” 매핑(깜빡임 방지) ── */
    body[data-page="overview"]   .nav-button[data-key="overview"]   .icon-wrapper::before,
    body[data-page="monitoring"] .nav-button[data-key="monitoring"] .icon-wrapper::before,
    body[data-page="condition"]  .nav-button[data-key="condition"]  .icon-wrapper::before,
    body[data-page="analysis"]   .nav-button[data-key="analysis"]   .icon-wrapper::before,
    body[data-page="emission"]   .nav-button[data-key="emission"]   .icon-wrapper::before{ opacity:1; } /* 활성 탭 녹색 박스 항상 ON */

    body[data-page="overview"]   .nav-button[data-key="overview"]   .icon-img,
    body[data-page="monitoring"] .nav-button[data-key="monitoring"] .icon-img,
    body[data-page="condition"]  .nav-button[data-key="condition"]  .icon-img,
    body[data-page="analysis"]   .nav-button[data-key="analysis"]   .icon-img,
    body[data-page="emission"]   .nav-button[data-key="emission"]   .icon-img{ filter:brightness(0) invert(1); } /* 활성 탭 아이콘 흰색화 */

    @media (max-width:1280px){
      .icon-wrapper{ width:68px; height:44px; }                          /* 저해상도 보정 */
    }

    .container {
        max-width: 1884px;
        width:100%;
        margin: 16px;
        height: calc(100vh - 50px - 60px - 32px); /* 상단바 - 하단바 - 마진 고려 */
        min-height: 600px; /* 최소 높이 보장 */
        overflow-y: auto; /* 세로 스크롤 허용 */

    }
    /* 반응형 미디어 쿼리 추가 */
       @media (max-width: 768px) {
            .container {
                margin: 8px; /* 모바일에서 마진 줄임 */
                min-height: 400px;
                height: auto; /* 모바일에서는 자동 높이 */
         }
}


</style>

<header class="main-header" role="banner" aria-label="상단 바">             <!-- 상단 고정 바 -->
    {{#logoPath}}
        <img src="{{logoPath}}" alt="로고" class="logo">                    <!-- 커스텀 로고(있으면) -->
    {{/logoPath}}
    {{^logoPath}}
        <img src="/icon/main_icon.svg" alt="메인 아이콘" class="logo">     <!-- 기본 상단 아이콘 -->
    {{/logoPath}}
    <h1 class="title">BEMS 제어</h1>                                     <!-- 타이틀 -->
</header>
{{! ---------- 하단 네비 ---------- }}
        <div class="container">
           {{! <div class="sub_container"> }}
                {{#isOverview}}
                    {{> page/overview }}
                {{/isOverview}}
                {{#isMonitoring}}
                    {{> page/monitoring }}
                {{/isMonitoring}}
                {{#isCondition}}
                    {{> page/condition }}
                {{/isCondition}}
                {{#isAnalysis}}
                    {{> page/analysis }}
                {{/isAnalysis}}

                {{#isEmission}}
                    {{> page/emission }}
                {{/isEmission}}
            {{! </div> }}
        </div>


<footer class="main-footer" role="navigation" aria-label="하단 네비게이션"> <!-- 하단 고정 네비 -->
    <nav class="bottom-nav">                                              <!-- 5등분 그리드(풀블리드) -->
        {{#navItems}}
            <a href="{{href}}" class="nav-button" data-key="{{key}}" aria-label="{{text}}"> <!-- 버튼(활성은 CSS가 매핑) -->
                <div class="icon-wrapper">                                      <!-- 86×50 컨테이너 -->
                    {{#iconPath}}
                        <img src="{{iconPath}}" alt="{{text}}" class="icon-img">    <!-- 개별 아이콘 경로 -->
                    {{/iconPath}}
                    {{^iconPath}}
                        <img src="/icon/{{key}}_icon.svg" alt="{{text}}" class="icon-img"> <!-- key 기반 기본 아이콘 -->
                    {{/iconPath}}
                    <span class="nav-label">{{text}}</span>                       <!-- 라벨 -->
                </div>
            </a>
        {{/navItems}}

        {{^navItems}}                                                       <!-- 서버 navItems 없을 때 기본 5개 -->
            <a href="/overview"   class="nav-button" data-key="overview"   aria-label="개요">
                <div class="icon-wrapper">
                    <img src="/icon/overview_icon.svg"   alt="개요"       class="icon-img">
                    <span class="nav-label">개요</span>
                </div>
            </a>
            <a href="/monitoring" class="nav-button" data-key="monitoring" aria-label="모니터링">
                <div class="icon-wrapper">
                    <img src="/icon/monitoring_icon.svg" alt="모니터링"   class="icon-img">
                    <span class="nav-label">모니터링</span>
                </div>
            </a>
            <a href="/condition"  class="nav-button" data-key="condition"  aria-label="에너지 현황">
                <div class="icon-wrapper">
                    <img src="/icon/condition_icon.svg"  alt="에너지 현황" class="icon-img">
                    <span class="nav-label">에너지 현황</span>
                </div>
            </a>
            <a href="/analysis"   class="nav-button" data-key="analysis"   aria-label="통합 분석">
                <div class="icon-wrapper">
                    <img src="/icon/analysis_icon.svg"   alt="통합 분석"   class="icon-img">
                    <span class="nav-label">통합 분석</span>
                </div>
            </a>
            <a href="/emission"   class="nav-button" data-key="emission"   aria-label="탄소배출">
                <div class="icon-wrapper">
                    <img src="/icon/emission_icon.svg"   alt="탄소배출"    class="icon-img">
                    <span class="nav-label">탄소배출</span>
                </div>
            </a>
        {{/navItems}}
    </nav>
</footer>

